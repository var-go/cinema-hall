# Cinema Hall

Микросервисная система для управления кинотеатром с возможностью бронирования билетов, управления сеансами, фильмами и залами. Система построена на архитектуре микросервисов с использованием Apache Kafka для асинхронной обработки событий и API Gateway в качестве единой точки входа.

## Функционал приложения

- Регистрация и авторизация пользователей
- Просмотр фильмов и сеансов
- Бронирование билетов с автоматической отменой через 15 минут
- Управление залами и местами
- Асинхронная обработка событий через Kafka

## Технологический стек

**Backend**: Go 1.25.4, Gin, PostgreSQL 15, GORM, Apache Kafka, JWT  
**Infrastructure**: Docker, Docker Compose, API Gateway  
**Архитектура**: Микросервисная (5 сервисов: User, Movie, Cinema, Booking, Gateway)

## Архитектура

```
             HTTP      ┌───────────────────┐
┌────────┐ ──────────> │  Gateway Service  │
│ Client │             └─────────┬─────────┘
└────────┘                       │
           ┌─────────────────────┼─────────────────────┐
           │                     │                     │
           v                     v                     v
    ┌──────────────┐      ┌──────────────┐      ┌──────────────┐
    │    Movie     │      │   Booking    │      │    User      │
    │   Service    │      │   Service    │      │   Service    │
    └──────┬───────┘      └──────┬───────┘      └──────┬───────┘
           │                     │                     │
      PostgreSQL                 │ HTTP           PostgreSQL
                                 │ (get seats,
                                 │  check availability)
                                 v
                          ┌──────────────┐
                          │   Cinema     │
                          │   Service    │
                          └──────┬───────┘
                                 │
                            PostgreSQL
                                 │
                          Kafka Topics
                     ┌─────────────────────┐
                     │ booking.confirmed   │
                     │ booking.cancelled   │
                     └─────────────────────┘
```

## Быстрый старт

### Требования

- Docker 20.10+
- Docker Compose 2.0+

### Установка и запуск

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd cinema-hall
```

2. Запустите все сервисы:
```bash
docker-compose up -d
```

3. Заполните базу данных тестовыми данными:
```bash
./seed_data.sh
```

Скрипт создаст:
- Жанры фильмов
- Фильмы
- Кинозалы и места
- Тестового пользователя

### Доступные сервисы

После успешного запуска доступны следующие сервисы:

- **API Gateway**: http://localhost:8085
- **Kafka UI**: http://localhost:8086

### Проверка работоспособности

Проверить, что все сервисы работают:

```bash
curl http://localhost:8085/api/movies
```

Если сервисы запущены корректно, вы получите список фильмов (может быть пустым, если данные еще не загружены).

### Остановка проекта

```bash
docker-compose down
```

## Команда разработки

- [Али Умаров](https://github.com/AliUmarov)
- [Усман Дзакаев](https://github.com/dzakaev)
- [Бекхан Хаджимагомадов](https://github.com/Bekkhanbs)
- [Вис Магомадов](https://github.com/magadov)
